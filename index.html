<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>مولّد خطط الـFitness</title>
  <style>
    body {font-family: sans-serif; background: #f5f5f5; margin: 0; padding: 0;}
    .wrap {max-width: 1200px; margin: auto; padding: 20px;}
    header {display: flex; align-items: center; gap: 15px; margin-bottom: 20px;}
    header img {width: 60px;}
    h1 {margin: 0;}
    .muted {color: #777;}
    .grid {display: grid; grid-template-columns: 2fr 1fr; gap: 20px;}
    .card {background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);}
    label {display: block; margin-bottom: 5px;}
    input, select, button {width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px;}
    .actions {display: flex; gap: 10px;}
    .btn {padding: 8px; border: none; border-radius: 4px; cursor: pointer;}
    .primary {background: #28a745; color: white;}
    .soft {background: #ddd;}
    .danger {background: #dc3545; color: white;}
    table {width: 100%; border-collapse: collapse; margin-top: 10px;}
    th, td {border: 1px solid #ddd; padding: 8px; text-align: center;}
    .kpi {display: flex; gap: 10px; margin-top: 10px;}
    .box {flex: 1; background: #f9f9f9; padding: 10px; border-radius: 4px;}
    .pill {display: inline-block; background: #007bff; color: #fff; padding: 2px 8px; border-radius: 4px; font-size: 0.8em;}
    footer {text-align: center; margin-top: 20px; color: #777;}
    @media(max-width: 768px) {.grid {grid-template-columns: 1fr;}}
  </style>
</head>
<body>

<div class="wrap">
  <header>
    <div class="logo"><img src="https://i.postimg.cc/nVkyzLwV/Black-and-White-Flat-Minimalist-Media-Journalist-Logo.png" alt="Logo"></div>
    <div>
      <h1>مولّد خطط الـFitness</h1>
      <div class="muted">أدخل بيانات العميل واحصل على السعرات والماكروز</div>
    </div>
  </header>

  <div class="grid">
    <section class="card">
      <form id="planForm" novalidate>
        <div class="row">
          <label for="name">اسم العميل</label>
          <input id="name" placeholder="مثال: أنور النعاس">

          <label for="email">إيميل (اختياري)</label>
          <input id="email" type="email" placeholder="example@mail.com">

          <label for="sex">الجنس</label>
          <select id="sex"><option value="male">ذكر</option><option value="female">أنثى</option></select>

          <label for="age">العمر (سنة)</label>
          <input id="age" type="number" min="12" max="90" placeholder="مثال: 28">

          <label for="height">الطول (سم)</label>
          <input id="height" type="number" min="120" max="230" placeholder="مثال: 175">

          <label for="weight">الوزن (كجم)</label>
          <input id="weight" type="number" step="0.1" min="35" max="250" placeholder="مثال: 78.5">

          <label for="activity">النشاط</label>
          <select id="activity">
            <option value="1.2">خامل (لا تمارين)</option>
            <option value="1.375">نشاط خفيف (1-2 أيام في الأسبوع)</option>
            <option value="1.55">نشاط متوسط (3-5 أيام في الأسبوع)</option>
            <option value="1.725">نشاط عالٍ (6-7 أيام في الأسبوع)</option>
            <option value="1.9">رياضي محترف (مرتين في اليوم)</option>
          </select>

          <label for="goal">الهدف</label>
          <select id="goal">
            <option value="fatloss">خسارة دهون</option>
            <option value="musclegain">زيادة عضل</option>
            <option value="recomp" selected>إعادة تشكيل الجسم</option>
          </select>

          <div class="actions">
            <button class="btn primary" type="submit">توليد الخطة</button>
            <button class="btn soft" type="button" id="saveBtn" disabled>حفظ العميل</button>
            <button class="btn danger" type="button" id="resetBtn">تفريغ الحقول</button>
          </div>
          <div class="muted">المعادلات: Mifflin-St Jeor للـBMR + عوامل النشاط</div>
        </div>
      </form>

      <div class="result" id="result">
        <div class="kpi">
          <div class="box"><h3>BMR</h3><b id="bmrOut">-</b></div>
          <div class="box"><h3>TDEE</h3><b id="tdeeOut">-</b></div>
          <div class="box"><h3>السعرات الموصى بها</h3><b id="calOut">-</b><span class="pill" id="goalTag"></span></div>
          <div class="box"><h3>نصيحة</h3><div class="muted" id="tipOut"></div></div>
        </div>
        <h3 style="margin-top:16px;">تفصيل الماكروز</h3>
        <table>
          <thead><tr><th>العنصر</th><th>جرام</th><th>سعرات</th><th>%</th></tr></thead>
          <tbody id="macroBody"></tbody>
        </table>
      </div>
    </section>

    <aside class="card clients">
      <h3>قائمة العملاء</h3>
      <div class="muted">التخزين محلي فقط.</div>
      <div id="clientsWrap" class="empty">لا توجد سجلات.</div>
    </aside>
  </div>

  <footer>&copy; مولّد خطط Fitness — للتوجيه فقط.</footer>
</div>

<script>
document.getElementById("planForm").addEventListener("submit", function(e) {
  e.preventDefault();
  const sex = document.getElementById("sex").value;
  const age = +document.getElementById("age").value;
  const height = +document.getElementById("height").value;
  const weight = +document.getElementById("weight").value;
  const activity = +document.getElementById("activity").value;
  const goal = document.getElementById("goal").value;

  let bmr = sex === "male"
    ? 10 * weight + 6.25 * height - 5 * age + 5
    : 10 * weight + 6.25 * height - 5 * age - 161;

  let tdee = bmr * activity;
  let calories = tdee;
  let tip = "";

  if (goal === "fatloss") { calories = tdee - 500; tip = "تناول سعرات أقل للحرق."; }
  if (goal === "musclegain") { calories = tdee + 300; tip = "تناول سعرات أكثر لبناء العضل."; }
  if (goal === "recomp") { tip = "حافظ على سعراتك مع تدريب جيد."; }

  document.getElementById("bmrOut").textContent = Math.round(bmr);
  document.getElementById("tdeeOut").textContent = Math.round(tdee);
  document.getElementById("calOut").textContent = Math.round(calories);
  document.getElementById("goalTag").textContent = goal;
  document.getElementById("tipOut").textContent = tip;

  const protein = weight * 2;
  const fat = weight * 0.9;
  const carbs = (calories - (protein*4 + fat*9)) / 4;

  const macros = [
    {name: "بروتين", g: protein, kcal: protein*4},
    {name: "دهون", g: fat, kcal: fat*9},
    {name: "كاربوهيدرات", g: carbs, kcal: carbs*4}
  ];

  document.getElementById("macroBody").innerHTML = macros.map(m =>
    `<tr><td>${m.name}</td><td>${m.g.toFixed(1)}</td><td>${m.kcal.toFixed(0)}</td><td>${(m.kcal/calories*100).toFixed(1)}%</td></tr>`
  ).join("");
});
</script>

</body>
</html>
